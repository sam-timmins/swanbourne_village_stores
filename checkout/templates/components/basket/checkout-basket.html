{% load bag_tools %}

<div class="col-12 col-md-6 m-auto background-light-green p-3 p-md-5 mb-3 my-md-5">
    <p class="text-header text-md text-purple text-center my-3">Your Basket</p>
    <hr class="text-purple my-3 mx-auto w-75">
    <div class="p-3 table-responsive">
        <table class="w-100 text-dark-green table align-middle">
            <thead class="background-purple text-white fst-italic">
                <tr>
                    <th>Item</th>
                    <th>Quantity</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                {% for item in bag_items %}
                    <tr>
                        <td class="my-3">{{ item.product.name | title }}</td>
                        <td class="my-3">{{ item.quantity }}</td>
                        <td class="my-3">{{ currency }}{{ item.product.price | calc_subtotal:item.quantity | floatformat:2 }}</td>
                    </tr>
                {% endfor %}
            </tbody>
            <tfoot class="background-purple text-white">
                <tr>
                    <td class="my-3">Basket Totals</td>
                    <td class="my-3">{{ product_count }}</td>
                    <td class="my-3 text-sm">{{ currency }}{{ grand_total|floatformat:2 }}</td>
                </tr>
            </tfoot>
        </table> 
    </div>
    <div class=" text-center my-5">
        <a class="btn btn-general btn-purple btn-box-shadow-white text-sm p-1 rounded-0"
        href="{% url 'view_bag' %}" aria-labelledby="checkout-basket">
            Return to your basket
        </a>
        <span class="sr-only" id="checkout-basket">
            Purple button with white writing navigating to your basket
        </span>
    </div>
</div>