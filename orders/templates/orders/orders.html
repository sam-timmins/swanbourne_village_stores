{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="p-3 table-responsive">
    <table class="w-100 text-dark-green table align-middle table-hover">
        <thead class="background-purple text-white fst-italic">
            <tr>
                <th>Status</th>
                <th>Order Number</th>
                <th>Date</th>
                <th>Items</th>
                <th>Order Total</th>
            </tr>
        </thead>
        <tbody class="text-black">
            {% for order in orders %}
                <tr>
                    <td>
                        {% if order.status %}
                            Completed
                        {% else %}
                            Open
                        {% endif %}
                    </td>
                    <td>
                        <a href="#" data-toggle="tooltip" data-bs-placement="bottom" data-bs-html="true"
                        title="<p class='text-xs text-white'>{{ order.order_number }}</p>"
                        class="text-purple">

                            {{ order.order_number|truncatechars:6 }}
                        </a>
                    </td>
                    <td>{{ order.date | date:"d/m/y"}}</td>

                    <td class="colspan-4">
                        <table class="table mb-0 sub-table">
                            <thead class="background-light-green text-purple fst-italic">
                                <tr>
                                    <th class="item">Item</th>
                                    <th class="quantity">Quantity</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for item in order.orderitems.all %}
                                <tr>
                                    {% if item.dish.name %}
                                        <td>{{ item.dish.name | title }}</td>
                                        <td>{{ item.quantity }}</td>
                                    {% endif %}

                                    {% if item.wine.name %}
                                        <td>{{ item.wine.name | title }}</td>
                                        <td>{{ item.quantity }}</td>
                                    {% endif %}

                                    {% if item.bundle.name %}
                                        <td>{{ item.bundle.name | title }}</td>
                                        <td>{{ item.quantity }}</td>
                                    {% endif %}

                                </tr>
                                

                            {% endfor %}
                            </tbody>
                        </table>
                    </td>

                    <td>${{ order.grand_total }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
